<!DOCTYPE html>
<html lang="id" class="h-full">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Database HMI Mimika</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body {
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
}
.table-container {
    overflow-x: auto;
}
table {
    border-collapse: collapse;
    width: 100%;
}
th, td {
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid #ddd;
    font-size: 0.95rem;
}
th {
    background: linear-gradient(135deg, #2d5016 0%, #ffffff 100%);
    color: #fff;
    position: sticky;
    top: 0;
    z-index: 10;
}
tr:hover {
    background-color: #f1f5f9;
}
input[type="text"] {
    width: 100%;
    padding: 0.5rem;
    margin-bottom: 1rem;
    border: 2px solid #ccc;
    border-radius: 0.5rem;
    transition: border-color 0.3s;
}
input[type="text"]:focus {
    border-color: #2d5016;
    outline: none;
}
</style>
</head>
<body class="h-full">

<div class="max-w-7xl mx-auto px-6 py-8">
    <h1 class="text-3xl font-bold text-center mb-6" style="color:#2d5016;">DATABASE ANGGOTA HMI MIMIKA</h1>

    <!-- Search Box -->
    <input type="text" id="searchBox" placeholder="ðŸ” Cari nama, NIK, komisariat, atau PT...">

    <!-- Table -->
    <div class="table-container">
        <table id="membersTable">
            <thead>
                <tr>
                    <th>NIK</th>
                    <th>Nama Lengkap</th>
                    <th>Nomor Telepon/HP</th>
                    <th>Alamat Email</th>
                    <th>Tanggal Lahir</th>
                    <th>Alamat</th>
                    <th>Jenis Kelamin</th>
                    <th>Status Anggota</th>
                    <th>Masuk HMI Tahun</th>
                    <th>Perguruan Tinggi</th>
                    <th>Komisariat Asal</th>
                    <th>Jabatan di HMI</th>
                    <th>Posisi Jabatan</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data akan diisi oleh JS -->
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRkxnLr5GK_w_WRktgY-SZZ2pjBHlDVSphEYLLSBLntg0IyQB3Z5178wjaES8-yMQV7ZcMTGym-VoZA/pub?gid=0&single=true&output=csv";

function fetchAndRenderCSV() {
    Papa.parse(csvUrl, {
        download: true,
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
            const data = results.data;
            renderTable(data);
        }
    });
}

function renderTable(data) {
    const tbody = document.querySelector("#membersTable tbody");
    tbody.innerHTML = "";
    data.forEach(member => {
        const row = document.createElement("tr");

        // Ambil kolom yang dibutuhkan saja
        const cols = [
            "Nomor Induk Kader (NIK)",
            "Nama Lengkap",
            "Nomor Telepon/HP",
            "Alamat Email",
            "Tanggal Lahir",
            "Alamat",
            "Jenis Kelamin",
            "Status Anggota",
            "Masuk HMI Tahun",
            "Perguruan Tinggi",
            "Komisariat Asal",
            "Jabatan di HMI",
            "Posisi Jabatan"
        ];

        cols.forEach(col => {
            const td = document.createElement("td");
            td.textContent = member[col] || "-";
            row.appendChild(td);
        });

        tbody.appendChild(row);
    });
}

// Search / filter
document.getElementById("searchBox").addEventListener("input", function() {
    const filter = this.value.toLowerCase();
    const rows = document.querySelectorAll("#membersTable tbody tr");
    rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
    });
});

// Initialize
fetchAndRenderCSV();
</script>

</body>
</html>
